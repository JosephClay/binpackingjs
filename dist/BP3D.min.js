!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("BinPacking",[],e):"object"==typeof exports?exports.BinPacking=e():t.BinPacking=e()}(this,function(){return i={},t.m=e=[function(t,e){t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},,,,,,,function(t,e,i){"use strict";i.r(e);var n,o=i(1),r=i.n(o),h=i(2),s=i.n(h),u=i(0),a=i.n(u),g=function(t){return function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n]}.bind(void 0,0<arguments.length&&void 0!==t?t:"binpackingjs")}("3D:"),c=function(){function t(e,i,n,o,h){r()(this,t),a()(this,"name",""),a()(this,"width",0),a()(this,"height",0),a()(this,"depth",0),a()(this,"maxWeight",0),a()(this,"items",[]),this.name=e,this.width=i,this.height=n,this.depth=o,this.maxWeight=h}return s()(t,[{key:"getName",value:function(){return this.name}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getMaxWeight",value:function(){return this.maxWeight}},{key:"getItems",value:function(){return this.items}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}},{key:"getPackedWeight",value:function(){return this.items.reduce(function(t,e){return t+e.getWeight()},0)}},{key:"weighItem",value:function(t){var e=this.getMaxWeight();return!e||t.getWeight()+this.getPackedWeight()<=e}},{key:"scoreRotation",value:function(t,e){t.rotationType=e;var i=t.getDimension();return this.getWidth()<i[0]||this.getHeight()<i[1]||this.getDepth()<i[2]?0:Math.pow(i[0]/this.getWidth(),2)+Math.pow(i[1]/this.getHeight(),2)+Math.pow(i[2]/this.getDepth(),2)}},{key:"getBestRotationOrder",value:function(t){for(var e={},i=0;i<t.allowedRotation.length;i++){var n=t.allowedRotation[i];e[n]=this.scoreRotation(t,n)}return Object.keys(e).sort(function(t,i){return e[i]-e[t]}).map(Number)}},{key:"putItem",value:function(t,e){var i=this,n=!1,o=this.getBestRotationOrder(t);t.position=e;for(var r=0;r<o.length;r++){t.rotationType=o[r];var h=t.getDimension();if(i.getWidth()<e[0]+h[0]||i.getHeight()<e[1]+h[1]||i.getDepth()<e[2]+h[2])n=!1;else{n=!0;for(var s=0;s<i.items.length;s++)if(i.items[s].intersect(t)){n=!1;break}n&&i.items.push(t)}if(g("try to putItem",n,"item",t.toString(),"box",i.toString()),n)break}return n}},{key:"toString",value:function(){return"Bin:".concat(this.name," (WxHxD = ").concat(this.getWidth(),"x").concat(this.getHeight(),"x").concat(this.getDepth(),", MaxWg. = ").concat(this.getMaxWeight(),")")}}]),t}(),f=[0,0,0],l=(n={},a()(n,0,"RotationType_WHD (w,h,d)"),a()(n,1,"RotationType_HWD (h,w,d)"),a()(n,2,"RotationType_HDW (h,d,w)"),a()(n,3,"RotationType_DHW (d,h,w)"),a()(n,4,"RotationType_DWH (d,w,h)"),a()(n,5,"RotationType_WDH (w,d,h)"),n),p=function(){function t(e,i,n,o,h,s){r()(this,t),a()(this,"name",""),a()(this,"width",0),a()(this,"height",0),a()(this,"depth",0),a()(this,"weight",0),a()(this,"allowedRotation",[0,1,2,3,4,5]),a()(this,"rotationType",0),a()(this,"position",[]),this.name=e,this.width=i,this.height=n,this.depth=o,this.weight=h,this.allowedRotation=s||this.allowedRotation}return s()(t,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getWeight",value:function(){return this.weight}},{key:"getRotationType",value:function(){return this.rotationType}},{key:"getAllowedRotation",value:function(){return this.allowedRotation}},{key:"getRotationTypeString",value:function(){return l[this.getRotationType()]}},{key:"getDimension",value:function(){var t;switch(this.rotationType){case 0:t=[this.getWidth(),this.getHeight(),this.getDepth()];break;case 1:t=[this.getHeight(),this.getWidth(),this.getDepth()];break;case 2:t=[this.getHeight(),this.getDepth(),this.getWidth()];break;case 3:t=[this.getDepth(),this.getHeight(),this.getWidth()];break;case 4:t=[this.getDepth(),this.getWidth(),this.getHeight()];break;case 5:t=[this.getWidth(),this.getDepth(),this.getHeight()]}return t}},{key:"intersect",value:function(t){return d(this,t,0,1)&&d(this,t,1,2)&&d(this,t,0,2)}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}},{key:"toString",value:function(){return"Item:".concat(this.name," (").concat(this.getRotationTypeString()," = ").concat(this.getDimension().join("x"),", Wg. = ").concat(this.weight,")")}}]),t}(),d=function(t,e,i,n){var o,r,h,s,u,a,g,c;return o=t.getDimension(),r=e.getDimension(),h=t.position[i]+o[i]/2,s=t.position[n]+o[n]/2,u=e.position[i]+r[i]/2,a=e.position[n]+r[n]/2,g=Math.max(h,u)-Math.min(h,u),c=Math.max(s,a)-Math.min(s,a),g<(o[i]+r[i])/2&&c<(o[n]+r[n])/2},m=function(){function t(){r()(this,t),a()(this,"bins",[]),a()(this,"items",[]),a()(this,"unfitItems",[])}return s()(t,[{key:"addBin",value:function(t){this.bins.push(t)}},{key:"addItem",value:function(t){this.items.push(t)}},{key:"findFittedBin",value:function(t){for(var e=0;e<this.bins.length;e++){var i=this.bins[e];if(i.weighItem(t)&&i.putItem(t,f))return 1===i.items.length&&i.items[0]===t&&(i.items=[]),i}return null}},{key:"getBiggerBinThan",value:function(t){for(var e=t.getVolume(),i=0;i<this.bins;i++){var n=this.bins[i];if(n.getVolume()>e)return n}return null}},{key:"unfitItem",value:function(){0!==this.items.length&&(this.unfitItems.push(this.items[0]),this.items.splice(0,1))}},{key:"packToBin",value:function(t,e){var i=null,n=[];if(!t.weighItem(e[0])||!t.putItem(e[0],f)){var o=this.getBiggerBinThan(t);return o?this.packToBin(o,e):this.items}for(var r=1;r<this.items.length;r++){var h=!1,s=this.items[r];if(t.weighItem(s))t:for(var u=0;u<3;u++)for(var a=0;a<t.items.length;a++){var g=void 0,c=t.items[a];switch(u){case 0:g=[c.position[0]+c.getWidth(),c.position[1],c.position[2]];break;case 1:g=[c.position[0],c.position[1]+c.getHeight(),c.position[2]];break;case 2:g=[c.position[0],c.position[1],c.position[2]+c.getDepth()]}if(t.putItem(s,g)){h=!0;break t}}if(!h){for(;null!==i;)if((i=this.getBiggerBinThan(t))&&(i.items.push(s),0===this.packToBin(i,i.items).length)){t=i,h=!0;break}h||n.push(s)}}return n}},{key:"pack",value:function(){for(this.bins.sort(function(t,e){return t.getVolume()-e.getVolume()}),this.items.sort(function(t,e){return e.getVolume()-t.getVolume()});0<this.items.length;){var t=this.findFittedBin(this.items[0]);null!==t?this.items=this.packToBin(t,this.items):this.unfitItem()}return null}}]),t}();i.d(e,"Bin",function(){return c}),i.d(e,"Item",function(){return p}),i.d(e,"Packer",function(){return m})}],t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=9);function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e,i});