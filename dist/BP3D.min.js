!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("BinPacking",[],e):"object"==typeof exports?exports.BinPacking=e():t.BinPacking=e()}(this,function(){return i={},t.m=e=[,function(t,e,i){"use strict";function n(t){return Math.round(t*Math.pow(10,5))}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.r(e);var h,u=function(){function t(e,i,r,h,u){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),o(this,"name",""),o(this,"width",0),o(this,"height",0),o(this,"depth",0),o(this,"maxWeight",0),o(this,"items",[]),this.name=e,this.width=n(i),this.height=n(r),this.depth=n(h),this.maxWeight=n(u)}return function(t,e,i){e&&r(t.prototype,e)}(t,[{key:"getName",value:function(){return this.name}},{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getMaxWeight",value:function(){return this.maxWeight}},{key:"getItems",value:function(){return this.items}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}},{key:"getPackedWeight",value:function(){return this.items.reduce(function(t,e){return t+e.getWeight()},0)}},{key:"weighItem",value:function(t){var e=this.getMaxWeight();return!e||t.getWeight()+this.getPackedWeight()<=e}},{key:"scoreRotation",value:function(t,e){t.rotationType=e;var i=t.getDimension();return this.getWidth()<i[0]||this.getHeight()<i[1]||this.getDepth()<i[2]?0:Math.pow(i[0]/this.getWidth(),2)+Math.pow(i[1]/this.getHeight(),2)+Math.pow(i[2]/this.getDepth(),2)}},{key:"getBestRotationOrder",value:function(t){for(var e={},i=0;i<t.allowedRotation.length;i++)e[i]=this.scoreRotation(t,t.allowedRotation[i]);return Object.keys(e).sort(function(t,i){return e[i]-e[t]}).map(Number)}},{key:"putItem",value:function(t,e){var i=this,n=!1,r=this.getBestRotationOrder(t);t.position=e;for(var o=0;o<r.length;o++){t.rotationType=r[o];var h=t.getDimension();if(!(i.getWidth()<e[0]+h[0]||i.getHeight()<e[1]+h[1]||i.getDepth()<e[2]+h[2])){n=!0;for(var u=0;u<i.items.length;u++)if(i.items[u].intersect(t)){n=!1;break}return n&&i.items.push(t),n}}return n}}]),t}();function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var g=[0,0,0],f=(a(h={},0,"RotationType_WHD (w,h,d)"),a(h,1,"RotationType_HWD (h,w,d)"),a(h,2,"RotationType_HDW (h,d,w)"),a(h,3,"RotationType_DHW (d,h,w)"),a(h,4,"RotationType_DWH (d,w,h)"),a(h,5,"RotationType_WDH (w,d,h)"),h),l=function(){function t(e,i,r,o,h,u){!function(e,i){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this),a(this,"name",""),a(this,"width",0),a(this,"height",0),a(this,"depth",0),a(this,"weight",0),a(this,"allowedRotation",[0,1,2,3,4,5]),a(this,"rotationType",0),a(this,"position",[]),this.name=e,this.width=n(i),this.height=n(r),this.depth=n(o),this.weight=n(h),this.allowedRotation=u||this.allowedRotation}return function(t,e,i){e&&s(t.prototype,e)}(t,[{key:"getWidth",value:function(){return this.width}},{key:"getHeight",value:function(){return this.height}},{key:"getDepth",value:function(){return this.depth}},{key:"getWeight",value:function(){return this.weight}},{key:"getRotationType",value:function(){return this.rotationType}},{key:"getAllowedRotation",value:function(){return this.allowedRotation}},{key:"getRotationTypeString",value:function(){return f[this.getRotationType()]}},{key:"getDimension",value:function(){var t;switch(this.rotationType){case 0:t=[this.getWidth(),this.getHeight(),this.getDepth()];break;case 1:t=[this.getHeight(),this.getWidth(),this.getDepth()];break;case 2:t=[this.getHeight(),this.getDepth(),this.getWidth()];break;case 3:t=[this.getDepth(),this.getHeight(),this.getWidth()];break;case 4:t=[this.getDepth(),this.getWidth(),this.getHeight()];break;case 5:t=[this.getWidth(),this.getDepth(),this.getHeight()]}return t}},{key:"intersect",value:function(t){return c(this,t,0,1)&&c(this,t,1,2)&&c(this,t,0,2)}},{key:"getVolume",value:function(){return this.getWidth()*this.getHeight()*this.getDepth()}}]),t}(),c=function(t,e,i,n){var r,o,h,u,s,a,g,f;return r=t.getDimension(),o=e.getDimension(),h=t.position[i]+r[i]/2,u=t.position[n]+r[n]/2,s=e.position[i]+o[i]/2,a=e.position[n]+o[n]/2,g=Math.max(h,s)-Math.min(h,s),f=Math.max(u,a)-Math.min(u,a),g<(r[i]+o[i])/2&&f<(r[n]+o[n])/2};function p(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"bins",[]),m(this,"items",[]),m(this,"unfitItems",[])}return function(t,e,i){e&&p(t.prototype,e)}(t,[{key:"addBin",value:function(t){this.bins.push(t)}},{key:"addItem",value:function(t){this.items.push(t)}},{key:"findFittedBin",value:function(t){for(var e=0;e<this.bins.length;e++){var i=this.bins[e];if(i.weighItem(t)&&i.putItem(t,g))return 1===i.items.length&&i.items[0]===t&&(i.items=[]),i}return null}},{key:"getBiggerBinThan",value:function(t){for(var e=t.getVolume(),i=0;i<this.bins;i++){var n=this.bins[i];if(n.getVolume()>e)return n}return null}},{key:"unfitItem",value:function(){0!==this.items.length&&(this.unfitItems.push(this.items[0]),this.items.splice(0,1))}},{key:"packToBin",value:function(t,e){var i=null,n=[];if(!t.weighItem(e[0])||!t.putItem(e[0],g)){var r=this.getBiggerBinThan(t);return r?this.packToBin(r,e):this.items}for(var o=1;o<this.items.length;o++){var h=!1,u=this.items[o];if(t.weighItem(u))t:for(var s=0;s<3;s++)for(var a=0;a<t.items.length;a++){var f=void 0,l=t.items[a];switch(s){case 0:f=[l.position[0]+l.getWidth(),l.position[1],l.position[2]];break;case 1:f=[l.position[0],l.position[1]+l.getHeight(),l.position[2]];break;case 2:f=[l.position[0],l.position[1],l.position[2]+l.getDepth()]}if(t.putItem(u,f)){h=!0;break t}}if(!h){for(;null!==i;)if((i=this.getBiggerBinThan(t))&&(i.items.push(u),0===this.packToBin(i,i.items).length)){t=i,h=!0;break}h||n.push(u)}}return n}},{key:"pack",value:function(){for(this.bins.sort(function(t,e){return t.getVolume()-e.getVolume()}),this.items.sort(function(t,e){return e.getVolume()-t.getVolume()});0<this.items.length;){var t=this.findFittedBin(this.items[0]);null!==t?this.items=this.packToBin(t,this.items):this.unfitItem()}return null}}]),t}();i.d(e,"Bin",function(){return u}),i.d(e,"Item",function(){return l}),i.d(e,"Packer",function(){return d})}],t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var r in e)t.d(n,r,function(t){return e[t]}.bind(null,r));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.p="",t(t.s=1);function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var e,i});